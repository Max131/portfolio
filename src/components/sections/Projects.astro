---
import { defaultLang } from "@i18n/ui.ts";
import { useTranslation } from "@i18n/utils.ts";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import { isURL } from "@utils/index";

const currentLocale = Astro.currentLocale || defaultLang;
const t = useTranslation(currentLocale);
---

<section id="projects" class="mb-12">
  <h2 class="font-title font-bold mb-1 text-2xl">{t("projects.title")}</h2>
  <div class="text-lg *:[p]:mb-4" set:html={t("projects.content")} />
  {
    (await getCollection("projects", ({ data: { featured } }) => featured)).map(
      (project) => (
        <article class="mb-6">
          <h3 class="font-semibold text-xl mb-1">
            <a
              class="text-blue-500 hover:underline"
              href={project.data.link}
              target="_blank"
              rel="noopener noreferrer"
            >
              {project.data.title}
            </a>
          </h3>
          <p class="text-lg">{project.data.summary}</p>
        </article>
      ),
    )
  }
</section>
